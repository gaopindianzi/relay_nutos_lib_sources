<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nut/OS: Thread Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nutos_logo.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nut/OS&#160;<span id="projectnumber">4.10.1</span></div>
   <div id="projectbrief">API Reference</div>
  </td>
  <td>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xg_thread.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Thread Management</h1>  </div>
<div class="ingroups"><a class="el" href="group__xg_nut_o_s.html">Nut/OS API</a></div></div>
<div class="contents">

<p>Cooperative multi-threading support.  
<a href="#_details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Thread Management:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__xg_thread.png" border="0" alt="" usemap="#group____xg__thread"/>
<map name="group____xg__thread" id="group____xg__thread">
<area shape="rect" id="node1" href="group__xg_nut_o_s.html" title="Operating System API." alt="" coords="5,5,88,30"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
</table>
<p>Cooperative multi-threading support. </p>
<p><a class="anchor" id="xrThread"></a> Typically Nut/OS is at its most useful where there are several concurrent tasks that need to be undertaken at the same time. To support this requirement, Nut/OS offers some kind of light processes called threads. In this context a thread is a sequence of executing software that can be considered to be logically independent from other software that is running on the same CPU.</p>
<p>All threads are executing in the same address space using the same hardware resources, which significantly reduces task switching overhead. Therefore it is important to stop them from causing each other problems. This is particularly an issue where two or more threads need to share a resources like memory locations or peripheral devices.</p>
<p>The system works on the principle that the most urgent thread always runs. One exception to this is if a CPU interrupt arrives and the interrupt has not been disabled. Each thread has a priority which is used to determine how urgent it is. This priority ranges from 0 to 255, with the lowest value indicating the most urgent.</p>
<p>Nut/OS implements cooperative multithreading. That means, that threads are not bound to a fixed timeslice. Unless they are waiting for specific event or explicitely yielding the CPU, they can rely on not being stopped unexpectedly. However, they may be interrupted by hardware interrupt signals. In opposite to pre-emptive multithreading, coorperative multithreading simplifies resource sharing and results in faster and smaller code.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Using the special priority 255 to kill a thread is not required and should be removed.</dd></dl>
<p>To specify a function named Back as an independant thread, one can write </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;sys/thread.h&gt;</span>

 THREAD(Back, arg)
 {
     <span class="keywordflow">for</span> (;;) {
         NutSleep(1000);
     }
 } 
</pre></div><p>To start this thread, use </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;sys/thread.h&gt;</span>

 <span class="comment">/* Other code here... */</span>

 NutThreadCreate(<span class="stringliteral">&quot;Bg&quot;</span>, Back, NULL, 512);
 <span class="comment">/* Execution continues here and concurrently in the background thread.</span>
</pre></div><p>The functions listed below are hardware independant. Additional API calls are located in the architecture dependant sections.</p>
<ul>
<li><a class="el" href="group__xg_nut_arch_avr_os_context_gcc.html">AVR with GNU Compiler</a></li>
<li><a class="el" href="group__xg_nut_arch_avr_os_context_gcc.html">AVR with ImageCraft Compiler</a></li>
<li><a class="el" href="group__xg_nut_arch_arm_os_context.html">ARM</a></li>
<li><a class="el" href="group__xg_nut_arch_unix_os_context.html">Emulator (UNIX)</a> </li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr>
<address>
  <small>
    &copy;&nbsp;2000-2010 by contributors - 
    visit <a href="http://www.ethernut.de/">http://www.ethernut.de/</a>
  </small>
</address>
</body>
</html>
